/* fichier CSS complet (remplace l'ancien) */

/* layout général */
body{ font-family: Arial, Helvetica, sans-serif; margin:0; padding:0; color:#222; background:#fff; }
.container{ max-width:1100px; margin:18px auto; padding:0 16px; }

/* CR sticky */
.cr-sticky-panel{
  position:sticky; top:0; z-index:1200;
  background:#f1f3f4; border-bottom:2px solid rgba(0,0,0,0.06);
  box-shadow:0 6px 18px rgba(0,0,0,0.06); padding:12px 18px;
  max-height:34vh; overflow:auto; transition:max-height .28s, padding .2s; border-radius:0 0 10px 10px;
}
.cr-sticky-panel.collapsed{ max-height:46px; overflow:hidden; padding-bottom:6px; }
#toggle-cr-panel{ position:absolute; right:12px; top:8px; border:0; background:#fff; padding:6px; border-radius:6px; cursor:pointer; box-shadow:0 1px 4px rgba(0,0,0,0.08); }

/* actions */
.actions-row{ margin-top:10px; display:flex; align-items:center; gap:8px; }
.btn-copier{ padding:8px 10px; border-radius:6px; border:0; background:#ddd; cursor:pointer; color:#fff; }
.btn-gen{ background:#5a8bd8; }
.copie-ok{ font-weight:700; color:#2a7f2a; }
.hidden{ display:none !important; }

/* Bulls container full width */
.bulls-container{ display:flex; gap:18px; width:100%; box-sizing:border-box; padding:14px; align-items:flex-start; justify-content:space-between; max-width:1400px; margin:8px auto; }
.bulls-left, .bulls-right{ flex:1 1 48%; display:flex; flex-direction:column; gap:8px; }
.bulls-left h2, .bulls-right h2{ margin:0 0 6px 0; font-size:1.05rem; }

/* svg sizing */
svg{ width:100%; height:auto; max-height:420px; border:1px solid #eee; background:#fff; border-radius:6px; }

/* legend under each bull */
.legend.under{ margin-top:8px; font-size:0.95rem; color:#333; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.legend-box{ display:inline-block; width:14px; height:12px; vertical-align:middle; border-radius:3px; }
.legend-box.green{ background:#27ae60; }
.legend-box.orange{ background:#f39c12; }
.legend-box.red{ background:#e74c3c; }

/* perf controls near bulls */
.perf-controls{ display:flex; flex-wrap:wrap; gap:10px; margin-top:8px; }
.perf-controls > div{ min-width:140px; }

/* fills classes (utilisées pour SVG) */
.fill-green{ fill:#27ae60 !important; fill-opacity:0.9 !important; }
.fill-orange{ fill:#f39c12 !important; fill-opacity:0.9 !important; }
.fill-red{ fill:#e74c3c !important; fill-opacity:0.9 !important; }

/* gris pour réversibilité inactif */
.fill-gray{ fill:#d9d9d9 !important; fill-opacity:0.95 !important; stroke:#bbb !important; }

/* classes utilitaires pour rev paths (évite inline styles) */
.rev-path{ cursor:pointer; }
.rev-active{ pointer-events:auto; opacity:1; transition:opacity .18s; }
.rev-inactive{ pointer-events:none; opacity:0.55; transition:opacity .18s; }

/* petites tables etc. */
.table-kine{ width:100%; border-collapse:collapse; margin-top:8px; }
.table-kine td{ padding:6px 8px; vertical-align:top; }
.flag{ font-size:0.9rem; color:#666; }
.fevg-auto{ font-weight:700; color:#2c7fb8; font-size:1rem; margin-top:6px; }

/* Restaurer rendu visuel des SVG "isch"/"nec" lorsqu'on les sélectionne */
.zone-bin{ fill: transparent; transition: fill .15s, fill-opacity .15s; }
.zone-bin.on{ fill: #3498db !important; /* bleu = segment inclus */ fill-opacity: 0.95 !important; stroke:#0b5fa8 !important; }
/* rendre les zones cliquables (CSP safe, évite style inline) */
.zone-svg,
.zone-bin,
.rev-path {
  fill: transparent; 
  transition: fill .15s, fill-opacity .15s;
  cursor: pointer;
  pointer-events: auto;
}

/* si nécessaire, forcer aussi au niveau des SVG */
svg .zone-svg,
svg .zone-bin,
svg .rev-path {
  cursor: pointer;
  pointer-events: auto;
}

/* Légendes et couleurs tri-état pour ischémie / nécrose (non = gris) */
.legend-box.isch-none   { background: #d9d9d9; }
.legend-box.isch-partial{ background: #f39c12; }
.legend-box.isch-complete{ background: #e74c3c; }

.legend-box.nec-none    { background: #d9d9d9; }
.legend-box.nec-partial { background: #f39c12; }
.legend-box.nec-complete{ background: #e74c3c; }

/* Zones SVG : par défaut transparent (CSS gère couleur via classes) */
.zone-svg,
.zone-bin,
.rev-path {
  fill: transparent; 
  transition: fill .15s, fill-opacity .15s;
  cursor: pointer;
  pointer-events: auto;
}

/* ISCHEMIE : override selon classe appliquée */
.zone-bin.isch-partial.on   { fill:#f39c12 !important; fill-opacity:0.92 !important; stroke:#b26b07 !important; }
.zone-bin.isch-complete.on  { fill:#e74c3c !important; fill-opacity:0.92 !important; stroke:#a4281a !important; }
.zone-bin.isch-none.on      { fill:#d9d9d9 !important; fill-opacity:0.95 !important; stroke:#bbb !important; }

/* NECROSE : override selon classe appliquée */
.zone-bin.nec-partial.on    { fill:#f39c12 !important; fill-opacity:0.92 !important; stroke:#b26b07 !important; }
.zone-bin.nec-complete.on   { fill:#e74c3c !important; fill-opacity:0.92 !important; stroke:#a4281a !important; }
.zone-bin.nec-none.on       { fill:#d9d9d9 !important; fill-opacity:0.95 !important; stroke:#bbb !important; }

/* fallback général si aucune classe spécifique */
.zone-bin.on { fill:#3498db !important; fill-opacity:0.95 !important; stroke:#0b5fa8 !important; }

/* petites badges/légendes (optionnel) */
.legend-badge { display:inline-block; min-width:26px; text-align:center; background:#fff; border-radius:12px; padding:2px 6px; border:1px solid rgba(0,0,0,0.06); font-weight:700; margin-left:6px; }

/* Overrides prioritaires par SVG pour restaurer les couleurs */
#svg-perfusion path.fill-green    { fill:#27ae60 !important; stroke:#1f8b47 !important; }
#svg-perfusion path.fill-orange   { fill:#f39c12 !important; stroke:#b26b07 !important; }
#svg-perfusion path.fill-red      { fill:#e74c3c !important; stroke:#a4281a !important; }

#svg-ischemie path.zone-bin.isch-partial.on  { fill:#f39c12 !important; stroke:#b26b07 !important; }
#svg-ischemie path.zone-bin.isch-complete.on { fill:#e74c3c !important; stroke:#a4281a !important; }
#svg-ischemie path.zone-bin.isch-none.on     { fill:#d9d9d9 !important; stroke:#bbb !important; }

#svg-necrose path.zone-bin.nec-partial.on    { fill:#f39c12 !important; stroke:#b26b07 !important; }
#svg-necrose path.zone-bin.nec-complete.on   { fill:#e74c3c !important; stroke:#a4281a !important; }
#svg-necrose path.zone-bin.nec-none.on       { fill:#d9d9d9 !important; stroke:#bbb !important; }

/* sécurité : garantir le curseur/pointer events sur les paths cliquables */
#svg-ischemie path, #svg-necrose path, #svg-perfusion path { cursor: pointer; pointer-events: auto; }

/* Empêche tout rect ou calque d'intercepter les clics */
#svg-reversibilite > rect { pointer-events: none; }

/* Clarifie le comportement pointer pour rev-path */
.rev-path { cursor: pointer; }
.rev-path.rev-active  { pointer-events: auto; cursor: pointer; opacity: 1; }
.rev-path.rev-inactive{ pointer-events: none; cursor: default; opacity: 0.55; }

/* conclusions pairées — deux bull-eyes côte à côte */
.conclusions-pair{ display:flex; gap:18px; align-items:flex-start; justify-content:space-between; margin:12px 8px; flex-wrap:wrap; }
.conclusion-block{ flex:1 1 48%; display:flex; gap:12px; align-items:flex-start; }
.conclusion-block .svg-panel{ flex:1 1 60%; }
.conclusion-block .table-panel{ flex:1 1 40%; min-width:220px; }

/* style pour selects territoire (uniforme) */
select[id*="territoire"]{ width:100%; padding:6px 8px; border-radius:6px; border:1px solid #ccc; background:#fff; }

